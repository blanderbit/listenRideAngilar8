<div class="content" infinite-scroll [infiniteScrollDistance]="5" [scrollWindow]="isMobile" (scrolled)="onScrollDown($event)">
  <div class="toolbar">
    <app-filters *ngIf="!isMobile || isMobile && showFilter"></app-filters>
    <div *ngIf="!isMobile || isMobile && !mapToggle" class="bikes-to-rent">Bikes to rent in {{location.city}} {{bikes.length}}</div>
  </div>

  <div *ngIf="isMobile" class="mobile-toolbar">
    <div class="toggle toggle-filters" (click)="toggleFilters()">
      <mat-icon aria-hidden="false" svgIcon="lnr-filter" aria-label="toggle icon"></mat-icon>
      <span >Filters</span>
    </div>

    <div class="toggle toggle-map" (click)="toggleMap()">
      <mat-icon *ngIf="!mapToggle" aria-hidden="false" aria-label="toggle icon">map</mat-icon>
      <mat-icon *ngIf="mapToggle" aria-hidden="false"  aria-label="toggle icon">list</mat-icon>
      <span *ngIf="!mapToggle">Map</span>
      <span *ngIf="mapToggle">List</span>
    </div>
  </div>

<div *ngIf="!isMobile || isMobile && !mapToggle" class="bike-grid">
    <app-bike-tile *ngFor="let ride of displayBikes$ | async"
      [brand]="ride.brand"
      [bikeName]="ride.name"
      [image]="ride.image_file"
      [size]="ride.size"
      [price]="ride.price_from"
      [rating]="ride.rating_average"
      [distance]="ride.distance"
      [clusterParams]="ride.cluster"
      [amount]="ride.cluster ? ride.cluster.variations.length : null"
    ></app-bike-tile>
    <!--    TODO add bike height-->
    <!--    [bikeHeight]="ride.cluster.sizes.size"-->

</div>
</div>

<div *ngIf="!isMobile || isMobile && mapToggle" class="map-container">
  <agm-map [latitude]="location.lat" [longitude]="location.lng" [zoom]="15" [styles]="mapStyles">
    <agm-marker-cluster [minimumClusterSize]= "2" [styles]="clusterStyles">
      <agm-marker *ngFor="let bike of bikes"
                  [latitude]="bike.lat_rnd"
                  [longitude]="bike.lng_rnd"
                  [iconUrl]="{url:'./assets/ui_icons/map/pin_map.png', anchor: {x: 28, y: 56},labelOrigin: {x: 28, y: 22}}"
                  [label]="{text: bike.price + 'â‚¬', color: 'white', fontSize: '13px', fontWeight: 'bold'}"
      >
        <agm-info-window
          [isOpen]=false
          [latitude]="bike.lat_rnd"
          [longitude]="bike.lng_rnd">

          <app-bike-tile
                         [brand]="bike.brand"
                         [bikeName]="bike.name"
                         [image]="bike.image_file"
                         [size]="bike.size"
                         [price]="bike.price_from"
                         [rating]="bike.rating_average"
                         [distance]="bike.distance"
                         [clusterParams]="bike.cluster"
                         [amount]="bike.cluster ? bike.cluster.variations.length : null"
          ></app-bike-tile>
        </agm-info-window>

      </agm-marker>
    </agm-marker-cluster>
</agm-map>
</div>

